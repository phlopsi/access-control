<?xml version="1.0" encoding="UTF-8"?>
<database
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:noNamespaceSchemaLocation="vendor/propel/propel/resources/xsd/database.xsd"
    defaultIdMethod="native"
    name="access_control"
    namespace="Phlopsi\AccessControl\Propel"
    platform="sqlite"
>
    <behavior name="auto_add_pk" />
    <entity name="Permission">
        <!--behavior tableName="nested_set" /-->
        <field name="externalId" type="longvarchar" required="true" />
        <unique>
            <unique-field name="externalId" />
        </unique>
    </entity>
    <entity name="PermissionToRole" isCrossRef="true">
        <field name="permissionId" type="integer" required="true" primaryKey="true" />
        <field name="roleId" type="integer" required="true" primaryKey="true" />
        <relation target="Permission">
            <reference local="permissionId" foreign="id" />
        </relation>
        <relation target="Role">
            <reference local="roleId" foreign="id" />
        </relation>
    </entity>
    <!--table tableName="prohibitions" name="Prohibition">
        <behavior tableName="nested_set" />
        <field tableName="external_id" type="longvarchar" required="true" />
        <unique>
            <unique-field name="ExternalId" />
        </unique>
    </table-->
    <!--table tableName="prohibitions_roles" name="ProhibitionToRole" isCrossRef="true">
        <field tableName="prohibitions_id" name="ProhibitionId" type="integer" required="true" primaryKey="true" />
        <field tableName="roles_id" name="RoleId" type="integer" required="true" primaryKey="true" />
        <relation foreignEntity="prohibitions">
            <reference local="prohibitions_id" foreign="id" />
        </relation>
        <relation foreignEntity="roles">
            <reference local="roles_id" foreign="id" />
        </relation>
    </table-->
    <!--table tableName="prohibitions_users" name="ProhibitionToUser" isCrossRef="true">
        <behavior tableName="timestampable" />
        <field tableName="prohibitions_id" name="ProhibitionId" type="integer" required="true" primaryKey="true" />
        <field tableName="users_id" name="UserId" type="integer" required="true" primaryKey="true" />
        <field tableName="prohibited_until" type="timestamp" />
        <relation foreignEntity="prohibitions">
            <reference local="prohibitions_id" foreign="id" />
        </relation>
        <relation foreignEntity="users">
            <reference local="users_id" foreign="id" />
        </relation>
    </table-->
    <entity name="Role">
        <!--behavior tableName="nested_set" /-->
        <field name="externalId" type="longvarchar" required="true" />
        <unique>
            <unique-field name="externalId" />
        </unique>
    </entity>
    <!--table tableName="roles_session_types" name="RoleToSessionType" isCrossRef="true">
        <field tableName="roles_id" name="RoleId" type="integer" required="true" primaryKey="true" />
        <field tableName="session_types_id" name="SessionTypeId" type="integer" required="true" primaryKey="true" />
        <relation foreignEntity="roles">
            <reference local="roles_id" foreign="id" />
        </relation>
        <relation foreignEntity="session_types">
            <reference local="session_types_id" foreign="id" />
        </relation>
    </table-->
    <entity name="RoleToUser" isCrossRef="true">
        <field name="roleId" type="integer" required="true" primaryKey="true" />
        <field name="userId" type="integer" required="true" primaryKey="true" />
        <relation target="Role">
            <reference local="roleId" foreign="id" />
        </relation>
        <relation target="User">
            <reference local="userId" foreign="id" />
        </relation>
    </entity>
    <!--table tableName="session_types" name="SessionType">
        <behavior tableName="nested_set" />
        <field tableName="external_id" type="longvarchar" required="true" />
        <unique>
            <unique-field name="ExternalId" />
        </unique>
    </table-->
    <entity name="User">
        <field name="externalId" type="longvarchar" required="true" />
        <unique>
            <unique-field name="externalId" />
        </unique>
    </entity>
</database>
